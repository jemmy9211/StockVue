<template>
    <div class="stock-container container-fluid">
        <nav class="navigation-bar row py-3 bg-light text-dark">
            <div class="col-md-3">
                <h1 class="mb-0">{{ stockName }}</h1>
            </div>
            <div class="col-md-3">
                <p class="mb-0">當前價格: {{ currentPrice }}</p>
            </div>
            <div class="col-md-3">
                <p class="mb-0">漲跌幅: {{ priceChange }}</p>
            </div>
        </nav>
        <div class="row">
            <div class="col-12">
                <trading-vue :data="chartData" :width="width" :height="height" :color-theme="colorTheme"></trading-vue>
            </div>
        </div>
    </div>
</template>

<script>
import TradingVue from 'trading-vue-js'
import axios from 'axios'

const url ='https://api.polygon.io/v2/aggs/ticker/AAPL/range/1/day/2024-01-09/2024-04-10?adjusted=true&sort=asc&apiKey=Za0nOUx7I57_RcDoZWL5Y4MpwbR5WKM2'
export default {
    name: 'app',
    components: { TradingVue },
    data() {
        return {
            width: window.innerWidth-50,
            height: window.innerHeight-90, // 減去導覽列的高度
            colorTheme: 'dark',
            stockName: 'Apple',
            currentPrice: 534,
            priceChange: '+1.2%',
            ohlcv: [
                [1683763200000, 809.84, 813.13, 808.86, 811.45, 15428029],
                [1683849600000, 806.77, 807.97, 804.87, 805.63, 14518943],
                [1683936000000, 805.37, 806.54, 801.45, 804.22, 15300781],
                [1684022400000, 807.71, 810.52, 804.59, 806.04, 15299873],
                [1684108800000, 811.66, 815.41, 810.38, 813.31, 15763541],
                [1684195200000, 807.0, 809.46, 806.53, 807.68, 15718714],
                [1684281600000, 807.86, 810.37, 807.53, 808.42, 16218057],
                [1684368000000, 803.56, 806.46, 802.52, 803.61, 16344021],
                [1684454400000, 808.09, 809.45, 806.08, 807.43, 15902996],
                [1684540800000, 812.98, 817.41, 810.79, 814.8, 16474360],
                [1684627200000, 816.34, 819.13, 814.48, 817.1, 17410525],
                [1684713600000, 820.03, 821.75, 817.13, 820.94, 17008947],
                [1684800000000, 821.88, 822.45, 821.45, 822.3, 16632635],
                [1684886400000, 821.74, 824.46, 819.91, 820.57, 16762343],
                [1684972800000, 823.33, 824.27, 822.1, 823.03, 15870394],
                [1685059200000, 827.24, 828.4, 824.4, 827.1, 16719907],
                [1685145600000, 823.03, 825.35, 819.84, 821.59, 16854584],
                [1685232000000, 822.62, 823.06, 821.93, 822.64, 17049727],
                [1685318400000, 827.52, 829.85, 826.96, 827.85, 16819301],
                [1685404800000, 825.64, 827.8, 823.91, 827.15, 17037386],
                [1685491200000, 822.57, 823.44, 819.55, 820.98, 17873464],
                [1685577600000, 818.98, 820.18, 817.18, 820.06, 17248568],
                [1685664000000, 816.3, 818.21, 814.76, 815.69, 17341115],
                [1685750400000, 819.56, 821.26, 816.96, 819.61, 17074150],
                [1685836800000, 823.98, 826.61, 822.18, 823.15, 17122561],
                [1685923200000, 824.37, 827.83, 823.6, 825.87, 16275017],
                [1686009600000, 823.83, 826.81, 820.42, 822.95, 15968015],
                [1686096000000, 822.17, 823.39, 820.31, 821.38, 16961097],
                [1686182400000, 824.14, 824.27, 822.05, 823.46, 17203653],
                [1686268800000, 821.9, 824.2, 820.32, 823.51, 17589232],
                [1686355200000, 825.78, 827.99, 825.62, 826.45, 17029680],
                [1686441600000, 826.91, 830.23, 826.19, 827.42, 16814087],
                [1686528000000, 824.26, 826.36, 821.08, 823.27, 17531744],
                [1686614400000, 822.41, 823.71, 822.09, 823.36, 18460878],
                [1686700800000, 824.63, 826.95, 824.46, 826.07, 18792041],
                [1686787200000, 827.24, 828.38, 825.67, 828.07, 18389675],
                [1686873600000, 823.94, 826.78, 821.36, 824.94, 17781275],
                [1686960000000, 826.56, 827.41, 824.73, 827.05, 17007970],
                [1687046400000, 823.31, 824.38, 820.8, 821.61, 16170738],
                [1687132800000, 819.45, 821.45, 819.42, 821.13, 15744688],
                [1687219200000, 816.54, 818.64, 813.59, 817.48, 16397475],
                [1687305600000, 818.32, 819.67, 815.94, 816.56, 15853019],
                [1687392000000, 822.14, 823.65, 821.15, 821.36, 16835011],
                [1687478400000, 821.94, 824.99, 820.55, 822.68, 17096426],
                [1687564800000, 821.36, 822.95, 817.76, 819.99, 17517622],
                [1687651200000, 817.72, 820.56, 817.06, 817.9, 17073890],
                [1687737600000, 819.13, 821.05, 816.52, 818.24, 17471272],
                [1687824000000, 819.7, 821.92, 817.95, 819.07, 18441239],
                [1687910400000, 814.71, 814.8, 813.71, 814.25, 18862198],
                [1687996800000, 812.95, 814.6, 810.47, 813.71, 17874186],
                [1688083200000, 812.82, 815.17, 809.79, 811.91, 18364027],
                [1688169600000, 812.19, 813.83, 808.44, 811.18, 19019522],
                [1688256000000, 811.68, 814.02, 810.17, 811.95, 19259269],
                [1688342400000, 811.96, 812.42, 809.8, 811.57, 19401311],
                [1688428800000, 807.03, 807.84, 806.93, 807.52, 19935536],
                [1688515200000, 808.22, 810.08, 805.81, 809.02, 20850561],
                [1688601600000, 803.64, 806.73, 801.55, 805.27, 20313187],
                [1688688000000, 799.12, 801.4, 797.63, 798.83, 19742510],
                [1688774400000, 795.07, 798.03, 791.42, 793.86, 19214708],
                [1688860800000, 793.61, 797.09, 791.76, 795.57, 19763054],
                [1688947200000, 790.44, 791.69, 787.92, 789.73, 19171219],
                [1689033600000, 785.56, 788.35, 783.94, 787.28, 18416005],
                [1689120000000, 789.36, 791.78, 784.92, 787.39, 18988035],
                [1689206400000, 790.57, 793.77, 790.36, 791.89, 18084292],
                [1689292800000, 786.65, 790.62, 786.09, 788.55, 17985455],
                [1689379200000, 789.02, 790.12, 787.47, 789.14, 18358953],
                [1689465600000, 785.99, 790.16, 785.26, 787.18, 18605775],
                [1689552000000, 781.99, 783.84, 780.94, 782.99, 17874085],
                [1689638400000, 778.43, 779.43, 777.41, 777.81, 17361014],
                [1689724800000, 777.48, 779.97, 775.32, 777.24, 17103537],
                [1689811200000, 775.12, 777.26, 773.65, 777.0, 16984522],
                [1689897600000, 772.72, 776.09, 771.95, 773.85, 16612624],
                [1689984000000, 771.09, 773.83, 769.49, 771.67, 17399457],
                [1690070400000, 775.93, 777.49, 773.42, 774.7, 16790287],
                [1690156800000, 771.23, 773.76, 767.48, 770.46, 16131334],
                [1690243200000, 770.8, 773.13, 768.85, 770.67, 15169511],
                [1690329600000, 770.33, 771.94, 769.83, 770.78, 14441547],
                [1690416000000, 769.05, 771.13, 767.71, 768.26, 14425924],
                [1690502400000, 765.28, 768.76, 762.31, 767.01, 13819411],
                [1690588800000, 761.16, 762.66, 759.5, 760.33, 14046703],
                [1690675200000, 760.99, 763.75, 758.64, 760.7, 14364749],
                [1690761600000, 759.84, 760.48, 756.16, 758.98, 15292846],
                [1690848000000, 764.42, 766.14, 760.95, 762.6, 14448416],
                [1690934400000, 766.09, 768.58, 764.11, 767.95, 14240413],
                [1691020800000, 766.61, 768.76, 765.31, 767.49, 14803207],
                [1691107200000, 764.37, 766.47, 761.37, 763.21, 14893916],
                [1691193600000, 768.45, 772.2, 765.59, 769.55, 14152706],
                [1691280000000, 766.49, 766.81, 763.17, 765.61, 13913549],
                [1691366400000, 769.23, 771.77, 765.65, 768.46, 13819934],
                [1691452800000, 773.14, 774.06, 770.76, 772.63, 14647735],
                [1691539200000, 776.63, 779.28, 776.15, 777.53, 13980546],
                [1691625600000, 772.1, 772.75, 768.2, 770.16, 14464068],
                [1691712000000, 774.41, 776.8, 770.49, 773.41, 15164410],
                [1691798400000, 777.9, 780.37, 777.27, 779.44, 14669546],
                [1691884800000, 775.72, 776.63, 773.96, 776.13, 14307014],
                [1691971200000, 780.46, 783.18, 776.92, 779.15, 15005155],
                [1692057600000, 778.13, 779.59, 774.67, 777.05, 14701706],
                [1692144000000, 781.96, 783.92, 780.06, 780.34, 13928935],
                [1692230400000, 778.31, 781.05, 777.65, 778.22, 13274450],
                [1692316800000, 779.36, 781.37, 779.17, 781.13, 13825985]
            ],
            ma20: [], // 用於存儲 20 日均線數據
            ma50: [] // 用於存儲 50 日均線數據
        }
    },
    computed: {
        chartData() {
            return {
                ohlcv: this.ohlcv,
            }
        }
    },
    methods: {
       
    },
    created() {
        //this.updateMA();
        axios.get(url,{
            mode: 'no-cors'
        }).then((res)=>{
            console.log(res)
        }).catch((error) => {
            console.error("An error occurred:", error);
            this.showdiv = false;
        });
    }
}
</script>

<style scoped>
.stock-container {
    font-family: Arial, sans-serif;
    width: 100%;
    height: 100vh;
    display: flex;
    flex-direction: column;
}

.navigation-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background-color: #f0f0f0;
    color: #0b0b0b;
    height: 60px;
}

.navigation-bar h1 {
    margin: 0;
    font-size: 20px;
    color: #040404;
}

.navigation-bar p {
    margin: 0 20px;
    font-size: 16px;
}

button {
    margin: 0 5px;
    padding: 5px 10px;
    background-color: #4CAF50;
    color: white;
    border: none;
    cursor: pointer;
}

.stock-info {
    margin-top: 20px;
    background-color: #f0f0f0;
    padding: 15px;
    border-radius: 5px;
}

h2 {
    margin-top: 0;
    color: #333;
}
</style>